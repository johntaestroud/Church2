<p>Audio Messages & Songs of Praise</p>
                    <br>
				</div>
				<!-- <div class="col-12 mt-3 text-center">
					<p><span></span></p>
				</div> -->
				
                <!--  -->
                 <!-- playlist start resource https://codepen.io/bato-web-agency/pen/ZYbzKjG-->
           <style>

</style>



<section class="base-template">
	<div class="wrapper base-template__wrapper">


		<div class="base-template__content">
			<div class="player-block">
				<div class="player">

					<!-- Player Settings -->

					<div class="player__settings">
						<div id="settingsPlayer" class="player__settings-btn" tabindex="0">
							<img src="https://raw.githubusercontent.com/CentralFloridaChurchofGod/icons/refs/heads/main/settings.svg" alt="settings-icon" width="24" height="24" loading="lazy">
						</div>
						<div class="player__settings-block">
							<div class="player__autoplay-block">
								Autoplay

								<label class="player__settings-checkbox">
									<input type="checkbox" checked name="autoplay" id="autoplay">

									<span class="player__settings-switch"></span>
								</label>
							</div>
						</div>

						<div id="musicPlaylist" class="player__playlist-btn" tabindex="0">
							<img src="https://raw.githubusercontent.com/CentralFloridaChurchofGod/icons/refs/heads/main/playlist.svg" alt="playlist-icon" width="24" height="24" loading="lazy">
						</div>
					</div>

					<!-- Audio Wave -->

					<div class="player__box">
						<div class="player__wave-box">
							<div class="player__bars" id="bars"></div>
						</div>

						<audio crossorigin="anonymous" id="audioPlayer" class="player__audio"></audio>
					</div>

					<div class="player__info">
						<div class="player__music-info">
							<span class="player__music-author" id="musicArtist">
								Name
							</span>
							<h3 class="player__music-title" id="musicTitle">
								Title
							</h3>
						</div>

						<span class="player__duration" id="musicDuration">
							00:00
						</span>
					</div>

					<!-- Player Controllers -->

					<div class="player__controller">
						<div id="musicVolume" class="player__volume-btn">
              <!-- audio volume commented out -->
							<!-- <img class="player__volume-icon player__volume-default" src="https://raw.githubusercontent.com/CentralFloridaChurchofGod/icons/refs/heads/main/volume.svg" alt="volume-icon" width="24" height="24" loading="lazy"> -->

							<img class="player__volume-icon player__volume-high hidden" src="https://raw.githubusercontent.com/CentralFloridaChurchofGod/icons/refs/heads/main/volume-changer.svg" alt="volume-icon" width="24" height="24" loading="lazy">

							<img class="player__volume-icon player__volume-mute hidden" src="https://raw.githubusercontent.com/CentralFloridaChurchofGod/icons/refs/heads/main/mute.svg" alt="volume-icon" width="24" height="24" loading="lazy">

							<div class="player__volume-block">
								<input name="volume" id="volumeInput" value="20" type="range" min="0" max="100">
							</div>
						</div>

						<div class="player__controls">
							<div class="player__prev-btn" id="prevBtn" tabindex="0">
								<img src="https://raw.githubusercontent.com/CentralFloridaChurchofGod/icons/refs/heads/main/prev-btn.svg" loading="lazy">
							</div>

							<div class="player__play-btn" id="playBtn" tabindex="0">
								<img class="player__play-icon" src="https://raw.githubusercontent.com/CentralFloridaChurchofGod/icons/d84b620708d6844542150ee976f8e50886be36c2/play.svg" alt="play-icon" width="32" height="32" loading="lazy">

								<img class="player__pause-icon hidden" src="https://raw.githubusercontent.com/CentralFloridaChurchofGod/icons/refs/heads/main/pause.svg" alt="pause-icon" width="32" height="32" loading="lazy">
							</div>

							<div class="player__replay-btn hidden" id="replayBtn" tabindex="0">
								<img class="player__replay-icon" src="https://raw.githubusercontent.com/CentralFloridaChurchofGod/icons/refs/heads/main/replay.svg" alt="replay-icon" width="32" height="32" loading="lazy">
							</div>

							<div class="player__next-btn" id="nextBtn" tabindex="0">
								<img src="https://raw.githubusercontent.com/CentralFloridaChurchofGod/icons/refs/heads/main/next.svg" alt="next-icon" width="44" height="44" loading="lazy">
							</div>
						</div>

						<div class="player__random-btn" id="randomBtn" tabindex="0">
							<img src="https://raw.githubusercontent.com/CentralFloridaChurchofGod/icons/refs/heads/main/random.svg" alt="random-icon" width="24" height="24" loading="lazy">
						</div>
					</div>
				</div>

				<!-- Playlist Block -->

				<div class="playlist">
					<div class="playlist__content">
						<div class="playlist__top">
							<h2 class="playlist__title">
							Church of God of St Petersburg
							</h2>

							<div class="playlist__control" tabindex="0">
								<i></i>
								<i></i>
							</div>
						</div>

						<div class="playlist__list"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

      <script id="rendered-js" >
const defaults = {
  random: false,
  volume: 0.5,
  music: [
  {
    title: "Pastor Troy Jones - Build A Sure Foundation",
    url:
    "https://ia801803.us.archive.org/13/items/sure-foundation-pastor-troy-jones/Sure%20Foundation-Pastor%20Troy%20Jones.mp3" },

  {
    title: "Pastor Troy Jones - Free From Sin... A Servant of Holiness",
    url:
    "https://ia601809.us.archive.org/31/items/free-from-sin...-a-servant-of-holiness-6-28-15/_Free%20From%20Sin...%20A%20Servant%20of%20Holiness_%206_28_15.mp3" },

  {
    title: "Pastor Troy Jones - No Cross No Crown",
    url: "https://ia601407.us.archive.org/35/items/no-cross-no-crown/No%20Cross%20No%20Crown.mp3" },

  {
    title: "Pastor Troy Jones - The Church That Jesus Built",
    url: "https://ia800306.us.archive.org/4/items/the-church-that-jesus-built/The%20Church%20that%20Jesus%20Built.mp3" },

  {
    title: "Brother Milton - Jesus I'll Never Forget",
    url: "https://ia801206.us.archive.org/2/items/jesus-ill-never-forget-bro-milton/Jesus%20I%27ll%20Never%20Forget%20Bro%20Milton.ia.mp4" },

  {
    title: "Song 1 - Testing",
    url:
    "" },

  {
    title: "Song 1 - Testing",
    url: "" },

  {
    title: "Song 1 - Testing",
    url: "" },

  {
    title: "Song 1 - Testing",
    url:
    "" },

  {
    title: "Song 1 - Testing",
    url:
    "" },

  {
    title: "Song 1 - Testing",
    url: "" },

  {
    title: "Song 1 - Testing",
    url: "" }] };




class MusicPlayer {
  constructor(config) {
    this.music = config.music || [];
    this.currentIndex = 0;
    this.barsCount = 44;

    this.playerBlock = document.querySelector(".player");
    this.musicList = document.querySelector(".playlist__list");
    this.audio = document.getElementById("audioPlayer");
    this.playlistBth = document.getElementById("musicPlaylist");
    this.settingsBth = document.getElementById("settingsPlayer");
    this.autoplayBtn = document.getElementById("autoplay");
    this.playBtn = document.getElementById("playBtn");
    this.replayBtn = document.getElementById("replayBtn");
    this.barsContainer = document.getElementById("bars");
    this.title = document.getElementById("musicTitle");
    this.artist = document.getElementById("musicArtist");
    this.durationDisplay = document.getElementById("musicDuration");
    this.playIcon = this.playBtn.querySelector(".player__play-icon");
    this.pauseIcon = this.playBtn.querySelector(".player__pause-icon");
    this.nextBtn = document.querySelector(".player__next-btn");
    this.prevBtn = document.querySelector(".player__prev-btn");
    this.closePlaylist = document.querySelector(".playlist__control");
    this.volumeInput = document.getElementById("volumeInput");
    this.randomBtn = document.getElementById("randomBtn");

    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
    this.analyser = this.audioContext.createAnalyser();

    const source = this.audioContext.createMediaElementSource(this.audio);
    source.connect(this.analyser);

    this.analyser.connect(this.audioContext.destination);
    this.analyser.fftSize = 512;
    this.bufferLength = this.analyser.frequencyBinCount;
    this.dataArray = new Uint8Array(this.bufferLength);

    this.audio.volume = config.volume ?? 0.5;

    if (this.volumeInput) {
      this.volumeInput.value = this.audio.volume * 100;
      this.volumeInput.style.setProperty("--range", this.volumeInput.value + "%");
    }

    this.random = config.random;
    this.autoplay = this.autoplayBtn.checked;

    this.createBars();
    this.setupControllers();
    this.playlistControl();
    this.setupPlaylist();
    this.playTrack(0);
    this.isMobile();
  }

  playTrack(index) {
    if (this.music[index]) {
      this.currentIndex = index;

      this.playlistItems?.forEach((el, i) => {
        el.classList.toggle("current", i === index);
      });

      const [artist, title] = this.music[index].title.split(" - ");

      this.audio.src = this.music[index].url;
      this.artist.textContent = artist || "Unknown Artist";
      this.title.textContent = title || "Unknown Name";

      this.updateControlButtons(false);
      this.createBars();
    }
  }

  // Player Actions

  next(isAuto = false) {
    if (isAuto && !this.autoplay) return;

    if (this.random) {
      let nextIndex;
      do {
        nextIndex = Math.floor(Math.random() * this.music.length);
      } while (nextIndex === this.currentIndex && this.music.length > 1);

      this.playTrack(nextIndex);
    } else {
      if (this.currentIndex < this.music.length - 1) {
        this.playTrack(this.currentIndex + 1);
      } else {
        return;
      }
    }

    this.audio.play();
    this.audioContext.resume();
    this.updateControlButtons(true);
  }

  prev() {
    if (this.currentIndex > 0) {
      if (this.autoplay) {
        this.playTrack(this.currentIndex - 1);
        this.audio.play();
        this.audioContext.resume();
        this.updateControlButtons(true);
      } else {
        this.playTrack(this.currentIndex - 1);
        this.updateControlButtons(false);
      }
    }
  }

  updateControlButtons(isPlaying, ended = false) {
    this.prevBtn.classList.toggle("disabled", this.currentIndex < 1);
    this.nextBtn.classList.toggle(
    "disabled",
    this.currentIndex === this.music.length - 1 && !this.random);


    if (!this.autoplay && ended) {
      this.replayBtn.classList.remove("hidden");
      this.playBtn.classList.add("hidden");

      return;
    } else {
      this.replayBtn.classList.add("hidden");
      this.playBtn.classList.remove("hidden");
    }

    if (isPlaying) {
      this.playIcon.classList.add("hidden");
      this.pauseIcon.classList.remove("hidden");
    } else {
      this.playIcon.classList.remove("hidden");
      this.pauseIcon.classList.add("hidden");
    }
  }

  // Audio Wave

  createBars() {
    this.barsContainer.innerHTML = "";

    for (let i = 0; i < this.barsCount; i++) {
      const bar = document.createElement("div");

      bar.classList.add("player__bar");
      this.barsContainer.appendChild(bar);
    }
  }



  updateBars() {
    this.analyser.getByteFrequencyData(this.dataArray);

    const bars = [...document.querySelectorAll(".player__bar")];
    const step = Math.floor(this.bufferLength / this.barsCount);

    bars.forEach((bar, index) => {
      let sum = 0;
      for (let i = 0; i < step; i++) {
        sum += this.dataArray[index * step + i];
      }

      const average = sum / step;
      const fillHeight = average / 2;

      bar.style.height = `${fillHeight}%`;

      const barDuration = this.audio.duration / this.barsCount;
      const currentIndex = Math.floor(this.audio.currentTime / barDuration);

      if (index <= currentIndex) {
        bar.classList.add("color");
      } else {
        bar.classList.remove("color");
      }
    });
  }

  // Playlist

  setupPlaylist() {
    this.playlistItems = [];

    for (let i = 0; i < this.music.length; i++) {
      const [artist, title] = this.music[i].title.split(" - ");
      const newMusicItem = document.createElement("div");

      newMusicItem.tabIndex = 0;
      newMusicItem.classList.add("playlist__item");

      if (i === 0) newMusicItem.classList.add("current");
      newMusicItem.setAttribute("data-song-id", i);

      newMusicItem.innerHTML = `
                <span class="playlist__song">${artist} - <span class="playlist__song-name">${title}</span></span>
                <p class="playlist__duration">00:00</p>
            `;

      this.musicList.appendChild(newMusicItem);
      this.playlistItems.push(newMusicItem);

      const durationElement = newMusicItem.querySelector(".playlist__duration");
      const audio = document.createElement("audio");

      audio.src = this.music[i].url;

      audio.addEventListener("loadedmetadata", () => {
        const duration = audio.duration;
        const mins = Math.floor(duration / 60).
        toString().
        padStart(2, "0");
        const secs = Math.floor(duration % 60).
        toString().
        padStart(2, "0");

        durationElement.textContent = `${mins}:${secs}`;
      });

      newMusicItem.addEventListener("click", () => {
        this.playlistItems.forEach(el => el.classList.remove("current"));
        newMusicItem.classList.add("current");
        this.playTrack(i);

        if (this.autoplay) {
          this.audio.play();
          this.audioContext.resume();
          this.updateControlButtons(true);
        } else {
          this.updateControlButtons(false);
        }
      });
    }
  }

  playlistControl() {
    this.playlistBth.addEventListener("click", () => {
      this.playerBlock.classList.toggle("open-playlist");
      this.playlistBth.classList.toggle("active");
    });

    this.closePlaylist.addEventListener("click", () => {
      this.playerBlock.classList.remove("open-playlist");
      this.playlistBth.classList.remove("active");
    });
  }

  // Player Controllers

  setupControllers() {
    // Audio Controllers

    this.audio.addEventListener("ended", () => {
      this.updateControlButtons(false, true);
      this.next(true);
    });

    this.audio.addEventListener("timeupdate", () => {
      if (this.audio.duration && !isNaN(this.audio.duration)) {
        const remainingTime = this.audio.duration - this.audio.currentTime;
        const mins = Math.floor(remainingTime / 60).
        toString().
        padStart(2, "0");
        const secs = Math.floor(remainingTime % 60).
        toString().
        padStart(2, "0");

        this.durationDisplay.textContent = `${mins}:${secs}`;
      } else {
        this.durationDisplay.textContent = "00:00";
      }
    });

    this.audio.addEventListener("loadedmetadata", () => {
      if (this.audio.duration && !isNaN(this.audio.duration)) {
        const mins = Math.floor(this.audio.duration / 60).
        toString().
        padStart(2, "0");
        const secs = Math.floor(this.audio.duration % 60).
        toString().
        padStart(2, "0");

        this.durationDisplay.textContent = `${mins}:${secs}`;
      } else {
        this.durationDisplay.textContent = "00:00";
      }
    });

    this.audio.addEventListener("play", () => {
      const update = () => {
        this.updateBars();

        if (!this.audio.paused) {
          requestAnimationFrame(update);
        }
      };

      update();
    });

    // Control Buttons

    this.playBtn.addEventListener("click", () => {
      if (this.audio.paused) {
        this.audio.play();
        this.audioContext.resume();
        this.updateControlButtons(true);
      } else {
        this.audio.pause();
        this.updateControlButtons(false);
      }
    });

    this.nextBtn.addEventListener("click", () => {
      this.next(false);
    });

    this.prevBtn.addEventListener("click", () => {
      this.prev();
    });

    this.replayBtn.addEventListener("click", () => {
      this.audio.currentTime = 0;
      this.audio.play();
      this.audioContext.resume();
      this.updateControlButtons(true);
    });

    this.randomBtn.addEventListener("click", () => {
      this.randomBtn.classList.toggle("active");

      this.random = !this.random;
    });

    // Audio Wave Controller

    this.barsContainer.addEventListener("click", event => {
      const rect = this.barsContainer.getBoundingClientRect();
      const clickX = event.clientX - rect.left;

      const barWidth = rect.width / this.barsCount;
      const index = Math.min(
      this.barsCount - 1,
      Math.max(0, Math.floor(clickX / barWidth)));


      const timePerBar = this.audio.duration / this.barsCount;
      const newTime = index * timePerBar;

      this.audio.currentTime = newTime;

      if (this.audio.paused) {
        const bars = [...document.querySelectorAll(".player__bar")];

        bars.forEach((bar, i) => {
          if (i <= index) {
            bar.classList.add("color");
          } else {
            bar.classList.remove("color");
          }
        });
      } else {
        this.updateBars();
      }
    });

    // Settings Controllers

    this.volumeInput.addEventListener("input", () => {
      const volumeMute = document.querySelector(".player__volume-mute");
      const volumeHigh = document.querySelector(".player__volume-high");
      const volumeDefault = document.querySelector(".player__volume-default");

      this.audio.volume = this.volumeInput.value / 100;

      if (this.volumeInput.value <= 0) {
        volumeDefault.classList.add("hidden");
        volumeHigh.classList.add("hidden");
        volumeMute.classList.remove("hidden");
      } else if (this.volumeInput.value >= 60) {
        volumeDefault.classList.add("hidden");
        volumeMute.classList.add("hidden");
        volumeHigh.classList.remove("hidden");
      } else {
        volumeMute.classList.add("hidden");
        volumeHigh.classList.add("hidden");
        volumeDefault.classList.remove("hidden");
      }

      let range = this.volumeInput.value + "%";

      this.volumeInput.style.setProperty("--range", range);
    });

    this.settingsBth.addEventListener("click", () => {
      this.settingsBth.classList.toggle("active");
    });

    this.autoplayBtn.addEventListener("change", () => {
      this.autoplay = this.autoplayBtn.checked;
    });
  }

  isMobile() {
    const updateBarsCount = () => {
      this.barsCount = window.innerWidth < 620 ? 25 : 50;

      this.createBars();
    };

    updateBarsCount();

    window.addEventListener("resize", () => {
      updateBarsCount();
    });
  }}


document.addEventListener("DOMContentLoaded", () => {
  new MusicPlayer(defaults);
});
//# sourceURL=pen.js
    </script>
         
        </ul>
      </div>
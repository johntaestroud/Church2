
<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  

    <link rel="apple-touch-icon" type="image/png" href="https://cpwebassets.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png" />

    <meta name="apple-mobile-web-app-title" content="CodePen">

    <link rel="icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico" />

    <link rel="mask-icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/logo-pin-b4b4269c16397ad2f0f7a01bcdf513a1994f4c94b8af2f191c09eb0d601762b1.svg" color="#111" />



  
    <script src="https://cpwebassets.codepen.io/assets/common/stopExecutionOnTimeout-2c7831bb44f98c1391d6a4ffda0e1fd302503391ca806e7fcc7b9b87197aec26.js"></script>


  <title></title>

    <link rel="canonical" href="https://codepen.io/hans/pen/XJmQqoP">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    
  
  
  
<style>
body {
  font-family: "Fira Code", monospace;
  background-color: #111827; /* Darker Slate Gray */
  color: #d1d5db; /* Light Gray */
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  padding: 1rem;
  overflow: hidden;
}

.dashboard-widget {
  border: 1px solid #4b5563;
  width: 100%;
  max-width: 500px;
  transition: background-color 0.5s ease, border-color 0.5s ease;
  position: relative;
  overflow: hidden;
}

#background-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0; /* Behind the content */
}

.content-wrapper {
  position: relative;
  z-index: 1;
  background-color: rgba(17, 24, 39, 0.6); /* Made overlay more transparent */
  backdrop-filter: blur(6px); /* Reduced blur effect */
}

.schedule-section {
  transition: opacity 0.4s ease-in-out;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}

.primary {
  opacity: 1;
}
.secondary {
  opacity: 0.4;
}
.secondary:hover {
  opacity: 0.7;
}
.next-time-glow {
  text-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
}
.header-glow {
  text-shadow: 0 0 10px rgba(59, 130, 246, 0.4);
}
.view-container {
  transition: max-height 0.5s ease-in-out, opacity 0.3s ease-in-out;
  overflow: hidden;
}

/* Dev Tools */
.dev-tools {
  transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  transform: translateX(110%);
}
.range-slider {
  -webkit-appearance: none;
  width: 100%;
  height: 10px;
  border-radius: 5px;
  background: #374151;
  outline: none;
  padding: 0;
  margin: 0;
}
.range-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: #3b82f6;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
.range-slider::-webkit-slider-thumb:hover {
  background: #60a5fa;
}
.range-slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border: 0;
  border-radius: 50%;
  background: #3b82f6;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
.range-slider::-moz-range-thumb:hover {
  background: #60a5fa;
}

/* Date Picker */
.date-picker-modal {
  transition: opacity 0.2s ease-in-out;
}
.calendar-day:not(.disabled):hover {
  background-color: #3b82f6;
  color: white;
}
.calendar-day.selected {
  background-color: #2563eb;
  color: white;
}
.calendar-day.disabled {
  color: #4b5563;
  cursor: not-allowed;
}

/* Schedule Column Hover */
.schedule-column:hover {
  background-color: rgba(75, 85, 99, 0.2);
}

/* Hierarchy Styles */
.primary .next-time {
  font-size: 2.25rem;
  line-height: 2.5rem;
}
.primary .arrival-time {
  font-size: 1rem;
  line-height: 1.5rem;
  opacity: 0.8;
}
.primary .countdown {
  display: block;
  font-size: 1.125rem;
  line-height: 1.75rem;
}
.secondary .next-time {
  font-size: 1.5rem;
  line-height: 2rem;
  color: #9ca3af;
}
.secondary .arrival-time {
  font-size: 0.875rem;
  line-height: 1.25rem;
  opacity: 0.6;
}
.secondary .countdown {
  display: none;
}

/* Kraken Easter Egg Theme */
.kraken-theme #background-canvas {
  display: none; /* Hide water canvas during kraken */
}
.kraken-theme .content-wrapper {
  background-color: rgba(13, 37, 56, 0.9) !important;
}
.kraken-theme {
  border-color: #17a2b8 !important;
}
.kraken-theme * {
  color: #17a2b8 !important;
  text-shadow: 0 0 5px #17a2b8;
}
.kraken-theme a,
.kraken-theme .primary,
.kraken-theme .calendar-day.selected,
.kraken-theme .range-slider::-webkit-slider-thumb {
  border-color: #17a2b8 !important;
  background-color: #0d2538 !important;
}
.kraken-theme svg {
  fill: #17a2b8 !important;
}

#kraken-tentacles {
  position: absolute;
  bottom: -150px; /* Start hidden */
  left: 0;
  width: 100%;
  height: 150px;
  pointer-events: none;
  transition: transform 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  z-index: 2;
}
#kraken-tentacles.active {
  transform: translateY(-150px);
}
</style>

  <script>
  window.console = window.console || function(t) {};
</script>

  
  
</head>

<body translate="no">
  <div class="flex flex-col items-center">
  <div class="dashboard-widget rounded-xl shadow-2xl">
    <canvas id="background-canvas"></canvas>
    <div class="content-wrapper">
      <header class="relative p-4 border-b border-gray-700/50">
        <div id="progress-container" class="absolute top-0 left-0 w-full h-1 bg-gray-700 hidden">
          <div id="progress-bar" class="h-full bg-blue-500 transition-all duration-1000 ease-linear"></div>
        </div>
        <div class="flex items-center justify-between">
          <h1 class="text-lg font-semibold header-glow text-blue-300 cursor-pointer">Services</h1>
          <div class="flex items-center space-x-2">
            <button id="todayBtn" class="text-gray-400 hover:text-white transition-colors hidden" title="Reset to Today">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.147 3.146a.5.5 0 0 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.5H12.5A1.5 1.5 0 0 0 14 7V2a.5.5 0 0 1 .5-.5z" />
              </svg>
            </button>
            <div id="dateDisplay" class="text-sm text-right text-gray-400 font-medium cursor-pointer hover:text-white transition-colors">// Loading...</div>
            <button id="prevDayBtn" class="text-xl p-1 rounded-full hover:bg-gray-700/50 transition-colors leading-none hidden" aria-label="Previous Day">‹</button>
            <button id="nextDayBtn" class="text-xl p-1 rounded-full hover:bg-gray-700/50 transition-colors leading-none" aria-label="Next Day">›</button>
          </div>
        </div>
      </header>

      <main>
        <div id="live-view" class="view-container">
          <div id="schedule-main" class="grid grid-cols-[1fr_auto_1fr]">
            <div id="sectionWestSeattle" class="schedule-section p-6">
              <h2 class="text-base font-semibold mb-2 text-gray-400">1901 62nd Avenue S </h2>
              <div>
                <p class="next-time font-bold text-green-400">-:-- --</p>
                <p class="arrival-time -mt-1">-:-- --</p>
              </div>
              <p class="countdown opacity-80 mt-3"></p>
            </div>
            <div class="w-px bg-gray-700/50"></div>
            <div id="sectionDowntown" class="schedule-section p-6">
              <h2 class="text-base font-semibold mb-2 text-gray-400">Start</h2>
              <div>
                <p class="next-time font-bold text-green-400">-:-- --</p>
                <p class="arrival-time -mt-1">-:-- --</p>
              </div>
              <p class="countdown opacity-80 mt-3"></p>
            </div>
          </div>
        </div>
        <div id="full-schedule-view" class="view-container p-6" style="max-height: 0; opacity: 0;">
          <div class="grid grid-cols-2">
            <div id="full-schedule-ws-col" class="schedule-column transition-colors duration-200 rounded-lg p-2 -m-2">
              <h2 class="text-base font-semibold mb-3 text-gray-400 text-center">Church</h2>
              <div id="full-schedule-west-seattle" class="space-y-1 text-base"></div>
            </div>
            <div id="full-schedule-dt-col" class="schedule-column transition-colors duration-200 rounded-lg p-2 -m-2">
              <h2 class="text-base font-semibold mb-3 text-gray-400 text-center">To</h2>
              <div id="full-schedule-downtown" class="space-y-1 text-base"></div>
            </div>
          </div>
        </div>
      </main>
    </div>
    <div id="kraken-tentacles">
      <svg viewBox="0 0 500 150" class="absolute bottom-0 left-0 w-full h-auto">
        <defs>
          <filter id="kraken-glow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur in="SourceGraphic" stdDeviation="2" result="blur" />
            <feMerge>
              <feMergeNode in="blur" />
              <feMergeNode in="SourceGraphic" />
            </feMerge>
          </filter>
        </defs>
        <g filter="url(#kraken-glow)">
          <path d="M 60 150 Q 80 100, 40 80 T 60 20" stroke="#17a2b8" stroke-width="8" stroke-linecap="round" fill="none" transform="rotate(-15 60 150)" />
          <path d="M 180 150 C 160 100, 220 80, 190 20 S 170 50, 180 70" stroke="#17a2b8" stroke-width="10" stroke-linecap="round" fill="none" transform="rotate(10 180 150)" />
          <path d="M 320 150 C 300 120, 350 110, 310 50 C 290 10, 340 10, 330 0" stroke="#17a2b8" stroke-width="7" stroke-linecap="round" fill="none" transform="rotate(-5 320 150)" />
          <path d="M 440 150 Q 420 80, 480 60 T 450 0" stroke="#17a2b8" stroke-width="9" stroke-linecap="round" fill="none" transform="rotate(15 440 150)" />
        </g>
      </svg>
    </div>
    <!-- <a href="https://kingcounty.gov/en/dept/metro/travel-options/water-taxi/west-seattle" target="_blank" rel="noopener noreferrer" class="absolute bottom-4 right-4 text-gray-500 hover:text-white transition-colors z-10" title="View Official Schedule">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z" />
        <path fill-rule="evenodd" d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z" />
      </svg>
    </a> -->
  </div>
</div>

<!-- Modals and Dev Tools -->
<div id="date-picker-modal" class="date-picker-modal fixed inset-0 bg-gray-900/80 backdrop-blur-sm p-4 hidden flex-col items-center justify-center z-50">
  <div class="bg-gray-800 rounded-lg shadow-xl p-4 w-full max-w-xs">
    <div class="flex justify-between items-center mb-4"><button id="prevMonthBtn" class="text-xl p-2 rounded-full hover:bg-gray-700/50 leading-none">‹</button>
      <h3 id="monthYear" class="font-bold text-lg"></h3><button id="nextMonthBtn" class="text-xl p-2 rounded-full hover:bg-gray-700/50 leading-none">›</button>
    </div>
    <div id="calendar-grid" class="grid grid-cols-7 gap-1 text-center"></div>
  </div>
</div>
<div id="dev-tools" class="dev-tools fixed top-0 right-0 h-full bg-gray-900/90 backdrop-blur-sm border-l border-gray-700 text-gray-300 shadow-2xl p-6 w-80 space-y-6 z-50">
  <p class="font-bold text-xl text-center border-b border-gray-700 pb-3">Dev Tools</p>
  <div>
    <div class="flex justify-between items-baseline mb-2"><label for="day-slider" class="text-sm font-semibold text-gray-400">Day Offset</label><span id="day-slider-value" class="text-lg font-bold">Today</span></div> <input type="range" id="day-slider" class="range-slider" min="-7" max="7" value="0">
  </div>
  <div>
    <div class="flex justify-between items-baseline mb-2"><label for="hour-slider" class="text-sm font-semibold text-gray-400">Hour</label><span id="hour-slider-value" class="text-lg font-bold">00</span></div> <input type="range" id="hour-slider" class="range-slider" min="0" max="23" value="0">
  </div>
  <div>
    <div class="flex justify-between items-baseline mb-2"><label for="minute-slider" class="text-sm font-semibold text-gray-400">Minute</label><span id="minute-slider-value" class="text-lg font-bold">00</span></div> <input type="range" id="minute-slider" class="range-slider" min="0" max="59" value="0">
  </div> <button id="reset-time-btn" class="w-full bg-blue-600 hover:bg-blue-500 rounded p-2 text-sm transition-colors mt-4">Reset to Live Time</button>
</div>
  
      <script id="rendered-js" >
// --- CONSTANTS & SCHEDULE DATA ---
const TRIP_DURATION_MINUTES = 0;
const schedules = {
  weekday: {
    westSeattle: [
    "test",
    "19:05"],

    downtown: [
    "test",
    "06:30",
    "07:05",
    "07:40",
    "08:15",
    "08:50",
    "10:30",
    "11:30",
    "12:30",
    "13:30",
    "14:30",
    "15:25",
    "16:05",
    "16:45",
    "17:25",
    "18:05",
    "18:45"] },


  saturday: {
    westSeattle: [
    "08:30",
    "09:15",
    "10:00",
    "10:45",
    "11:30",
    "12:15",
    "13:00",
    "13:45",
    "14:30",
    "15:15",
    "16:00",
    "16:45",
    "17:30",
    "18:15",
    "19:00",
    "19:45",
    "20:30",
    "21:15",
    "22:00"],

    downtown: [
    "09:00",
    "09:45",
    "10:30",
    "11:15",
    "12:00",
    "12:45",
    "13:30",
    "14:15",
    "15:00",
    "15:45",
    "16:30",
    "17:15",
    "18:00",
    "18:45",
    "19:30",
    "20:15",
    "21:00",
    "21:45",
    "22:30"] },


  sunday: {
    westSeattle: [
    "test",
    "12:00"],

    downtown: [
    "09:00",
    "09:45",
    "21:45",
    "22:30"] } };




// --- DOM ELEMENTS & STATE ---
const dom = {
  canvas: document.getElementById("background-canvas"),
  kraken: document.getElementById("kraken-tentacles"),
  title: document.querySelector("h1"),
  widget: document.querySelector(".dashboard-widget"),
  dateDisplay: document.getElementById("dateDisplay"),
  liveView: document.getElementById("live-view"),
  fullScheduleView: document.getElementById("full-schedule-view"),
  sectionWestSeattle: document.getElementById("sectionWestSeattle"),
  sectionDowntown: document.getElementById("sectionDowntown"),
  fullScheduleWestSeattle: document.getElementById(
  "full-schedule-west-seattle"),

  fullScheduleDowntown: document.getElementById("full-schedule-downtown"),
  prevDayBtn: document.getElementById("prevDayBtn"),
  nextDayBtn: document.getElementById("nextDayBtn"),
  todayBtn: document.getElementById("todayBtn"),
  devTools: document.getElementById("dev-tools"),
  resetTimeBtn: document.getElementById("reset-time-btn"),
  progressContainer: document.getElementById("progress-container"),
  progressBar: document.getElementById("progress-bar"),
  daySlider: document.getElementById("day-slider"),
  hourSlider: document.getElementById("hour-slider"),
  minuteSlider: document.getElementById("minute-slider"),
  daySliderValue: document.getElementById("day-slider-value"),
  hourSliderValue: document.getElementById("hour-slider-value"),
  minuteSliderValue: document.getElementById("minute-slider-value"),
  datePickerModal: document.getElementById("date-picker-modal"),
  monthYear: document.getElementById("monthYear"),
  calendarGrid: document.getElementById("calendar-grid"),
  prevMonthBtn: document.getElementById("prevMonthBtn"),
  nextMonthBtn: document.getElementById("nextMonthBtn") };

let displayDate = new Date();
let manualOverride = false;
let simulatedTime = null;
let calendarDate = new Date();
let titleClickCount = 0;

// --- TIME & UTILITY FUNCTIONS ---
const getCurrentTime = () =>
simulatedTime ? new Date(simulatedTime) : new Date();
const createDateFromTime = (timeStr, baseDate) => {
  const [h, m] = timeStr.split(":").map(Number);
  const d = new Date(baseDate);
  d.setHours(h, m, 0, 0);
  return d;
};
const findNextDeparture = (now, departures) => {
  for (const time of departures)
  if (createDateFromTime(time, now) > now) return time;
  return null;
};
const findLastDeparture = (now, departures) => {
  return (
    [...departures].
    reverse().
    find(time => createDateFromTime(time, now) < now) || null);

};
const isSameDay = (d1, d2) =>
d1.getFullYear() === d2.getFullYear() &&
d1.getMonth() === d2.getMonth() &&
d1.getDate() === d2.getDate();
const isTodayOrFuture = d1 => {
  const today = new Date();
  today.setHours(0, 0, 0, 0);
  return d1 >= today;
};
const formatTo12Hour = (date) =>
date.toLocaleTimeString("en-US", {
  hour: "numeric",
  minute: "2-digit",
  hour12: true });

const formatTo12HourParts = date => {
  const parts = new Intl.DateTimeFormat("en-US", {
    hour: "numeric",
    minute: "2-digit",
    hour12: true }).
  formatToParts(date);
  const time =
  parts.find(p => p.type === "hour").value +
  ":" +
  parts.find(p => p.type === "minute").value;
  const period = parts.find(p => p.type === "dayPeriod").value;
  return `<span>${time}</span><span class="text-xs font-medium text-gray-400 ml-1">${period}</span>`;
};

// --- BACKGROUND ANIMATION ---
const ctx = dom.canvas.getContext("2d");
let width,
height,
step = 0;

function resizeCanvas() {
  width = dom.canvas.width = dom.widget.clientWidth;
  height = dom.canvas.height = dom.widget.clientHeight;
}

function drawWaves() {
  ctx.clearRect(0, 0, width, height);
  const wave = (amplitude, frequency, phase, color) => {
    ctx.beginPath();
    ctx.moveTo(0, height);
    for (let x = 0; x < width; x++) {
      const y = Math.sin(x * frequency + step + phase) * amplitude + height / 2;
      ctx.lineTo(x, y + height / 1.5);
    }
    ctx.lineTo(width, height);
    ctx.closePath();
    ctx.fillStyle = color;
    ctx.fill();
  };
  wave(20, 0.004, 0, "rgba(30, 41, 59, 0.6)");
  wave(30, 0.003, 2, "rgba(30, 41, 59, 0.4)");
  wave(15, 0.005, 4, "rgba(55, 65, 81, 0.4)");
  step += 0.02;
  requestAnimationFrame(drawWaves);
}

const resizeObserver = new ResizeObserver(resizeCanvas);
resizeObserver.observe(dom.widget);

resizeCanvas();
drawWaves();

// --- UI UPDATE FUNCTIONS ---
function updateLiveSectionUI(section, departures) {
  const now = getCurrentTime();
  const nextTimeStr = findNextDeparture(now, departures);
  const nextTimeEl = section.querySelector(".next-time");
  const arrivalTimeEl = section.querySelector(".arrival-time");
  const countdownEl = section.querySelector(".countdown");
  if (nextTimeStr) {
    const nextDepartureDate = createDateFromTime(nextTimeStr, now);
    const arrivalDate = new Date();

    const diffMinutes = Math.round((nextDepartureDate - now) / 60000);
    nextTimeEl.textContent = formatTo12Hour(nextDepartureDate);
    arrivalTimeEl.textContent = formatTo12Hour(arrivalDate);
    if (diffMinutes > 1) {
      countdownEl.innerHTML = `Starting in <b class="font-bold">${diffMinutes}</b> min`;
    } else if (diffMinutes === 1) {
      countdownEl.innerHTML = `in <b class="font-bold">1</b> min`;
    } else {
      countdownEl.textContent = "Services has started";
    }
    nextTimeEl.classList.add("text-green-400");
    nextTimeEl.classList.remove("text-red-400");
  } else {
    nextTimeEl.textContent = "Done";
    arrivalTimeEl.textContent = "--:--";
    countdownEl.textContent = "";
    nextTimeEl.classList.remove("text-green-400");
    nextTimeEl.classList.add("text-red-400");
  }
}
function setPrimary(primarySection, secondarySection) {
  primarySection.classList.add("primary");
  primarySection.classList.remove("secondary");
  primarySection.querySelector(".next-time").classList.add("next-time-glow");
  secondarySection.classList.add("secondary");
  secondarySection.classList.remove("primary");
  secondarySection.
  querySelector(".next-time").
  classList.remove("next-time-glow");
}
function populateFullScheduleUI(schedule) {
  const formatRow = time => {
    const departureDate = createDateFromTime(time, displayDate);
    const arrivalDate = new Date(
    departureDate.getTime() + TRIP_DURATION_MINUTES * 60000);

    return `<div class="text-center"><div class="text-lg">${formatTo12HourParts(
    departureDate)
    }</div><div class="text-xs text-gray-400 -mt-1">${formatTo12Hour(
    arrivalDate)
    }</div></div>`;
  };
  dom.fullScheduleWestSeattle.innerHTML = schedule.westSeattle.
  map(formatRow).
  join("");
  dom.fullScheduleDowntown.innerHTML = schedule.downtown.
  map(formatRow).
  join("");
}
function switchView(showLive) {
  if (showLive) {
    dom.liveView.style.maxHeight = dom.liveView.scrollHeight + "px";
    dom.liveView.style.opacity = "1";
    dom.fullScheduleView.style.maxHeight = "0";
    dom.fullScheduleView.style.opacity = "0";
  } else {
    dom.liveView.style.maxHeight = "0";
    dom.liveView.style.opacity = "0";
    dom.fullScheduleView.style.maxHeight =
    dom.fullScheduleView.scrollHeight + "px";
    dom.fullScheduleView.style.opacity = "1";
  }
}
function updateProgressBar(schedule) {
  const now = getCurrentTime();
  if (now.getHours() < 12) {
    dom.progressContainer.classList.add("hidden");
    return;
  }
  const primaryDepartures = dom.sectionDowntown.classList.contains("primary") ?
  schedule.downtown :
  schedule.westSeattle;
  const last = findLastDeparture(now, primaryDepartures);
  const next = findNextDeparture(now, primaryDepartures);
  if (last && next) {
    const lastDate = createDateFromTime(last, now);
    const nextDate = createDateFromTime(next, now);
    const total = nextDate - lastDate;
    const elapsed = now - lastDate;
    const percent = Math.min(elapsed / total * 100, 100);
    dom.progressBar.style.width = `${percent}%`;
    dom.progressContainer.classList.remove("hidden");
  } else {
    dom.progressContainer.classList.add("hidden");
  }
}
function updateScheduleDisplay() {
  const now = getCurrentTime();
  const today = new Date();
  const isViewingToday = isSameDay(displayDate, today);
  dom.todayBtn.classList.toggle("hidden", isViewingToday && !simulatedTime);
  dom.prevDayBtn.classList.toggle("hidden", isSameDay(displayDate, today));
  const day = displayDate.getDay();
  let schedule = schedules.sunday;
  if (day > 0 && day < 6) schedule = schedules.weekday;else
  if (day === 6) schedule = schedules.saturday;
  if (isSameDay(displayDate, now)) {
    updateLiveSectionUI(dom.sectionWestSeattle, schedule.westSeattle);
    updateLiveSectionUI(dom.sectionDowntown, schedule.downtown);
    updateProgressBar(schedule);
    if (!manualOverride) {
      now.getHours() < 14 ?
      setPrimary(dom.sectionWestSeattle, dom.sectionDowntown) :
      setPrimary(dom.sectionDowntown, dom.sectionWestSeattle);
    } else {
      const p = document.querySelector(".primary");
      if (p) setPrimary(p, document.querySelector(".secondary"));
    }
    switchView(true);
  } else {
    populateFullScheduleUI(schedule);
    dom.progressContainer.classList.add("hidden");
    switchView(false);
  }
}
function updateLiveElements() {
  const now = getCurrentTime();
  const onDisplayDay = isSameDay(displayDate, now);
  const options = {
    weekday: "short",
    month: "short",
    day: "numeric",
    hour: onDisplayDay ? "numeric" : undefined,
    minute: onDisplayDay ? "2-digit" : undefined };

  dom.dateDisplay.textContent = (onDisplayDay ?
  now :
  displayDate).
  toLocaleString("en-US", options);
  if (onDisplayDay || simulatedTime) {
    updateScheduleDisplay();
  }
}
function renderCalendar() {
  dom.calendarGrid.innerHTML = "";
  const month = calendarDate.getMonth();
  const year = calendarDate.getFullYear();
  dom.monthYear.textContent = calendarDate.toLocaleString("en-US", {
    month: "long",
    year: "numeric" });

  ["S", "M", "T", "W", "T", "F", "S"].forEach(day => {
    const dayEl = document.createElement("div");
    dayEl.className = "font-bold text-xs text-gray-500";
    dayEl.textContent = day;
    dom.calendarGrid.appendChild(dayEl);
  });
  const firstDayOfMonth = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month + 1, 0).getDate();
  for (let i = 0; i < firstDayOfMonth; i++) {
    dom.calendarGrid.appendChild(document.createElement("div"));
  }
  for (let i = 1; i <= daysInMonth; i++) {
    const dayEl = document.createElement("div");
    const date = new Date(year, month, i);
    dayEl.textContent = i;
    dayEl.className =
    "calendar-day p-2 rounded-full cursor-pointer transition-colors";
    if (!isTodayOrFuture(date)) {
      dayEl.classList.add("disabled");
    } else {
      if (isSameDay(date, displayDate)) dayEl.classList.add("selected");
      dayEl.addEventListener("click", () => {
        displayDate = date;
        simulatedTime = null;
        updateScheduleDisplay();
        toggleDatePicker(false);
      });
    }
    dom.calendarGrid.appendChild(dayEl);
  }
}
function toggleDatePicker(show) {
  if (show) {
    calendarDate = new Date(displayDate);
    renderCalendar();
    dom.datePickerModal.classList.remove("hidden");
    dom.datePickerModal.classList.add("flex");
  } else {
    dom.datePickerModal.classList.add("hidden");
    dom.datePickerModal.classList.remove("flex");
  }
}
function initializeDevTools() {
  const now = new Date();
  dom.hourSlider.value = now.getHours();
  dom.minuteSlider.value = now.getMinutes();
  dom.daySlider.value = 0;
  updateSliderDisplays();
}
function updateSliderDisplays() {
  const dayOffset = parseInt(dom.daySlider.value, 10);
  if (dayOffset === 0) dom.daySliderValue.textContent = "Today";else
  if (dayOffset === 1) dom.daySliderValue.textContent = "+1 day";else
  if (dayOffset === -1) dom.daySliderValue.textContent = "-1 day";else

  dom.daySliderValue.textContent = `${
  dayOffset > 0 ? "+" : ""
  }${dayOffset} days`;
  dom.hourSliderValue.textContent = String(dom.hourSlider.value).padStart(
  2,
  "0");

  dom.minuteSliderValue.textContent = String(dom.minuteSlider.value).padStart(
  2,
  "0");

}
function handleSliderChange() {
  const dayOffset = parseInt(dom.daySlider.value, 10);
  const hour = parseInt(dom.hourSlider.value, 10);
  const minute = parseInt(dom.minuteSlider.value, 10);
  simulatedTime = new Date();
  simulatedTime.setDate(simulatedTime.getDate() + dayOffset);
  simulatedTime.setHours(hour, minute, 0, 0);
  displayDate = new Date(simulatedTime);
  updateSliderDisplays();
  updateScheduleDisplay();
}
function toggleDevTools() {
  const isVisible = dom.devTools.style.transform === "translateX(0px)";
  if (!isVisible) {
    initializeDevTools();
  }
  dom.devTools.style.transform = isVisible ?
  "translateX(110%)" :
  "translateX(0px)";
}
document.addEventListener("keydown", e => {
  if (e.key === "d") toggleDevTools();
});
[dom.daySlider, dom.hourSlider, dom.minuteSlider].forEach(slider => {
  slider.addEventListener("input", handleSliderChange);
});
dom.resetTimeBtn.addEventListener("click", () => {
  simulatedTime = null;
  displayDate = new Date();
  initializeDevTools();
  updateScheduleDisplay();
});
function navigateDay(offset) {
  const newDate = new Date(displayDate);
  newDate.setDate(newDate.getDate() + offset);
  if (offset < 0 && isSameDay(newDate, new Date())) {
    /* allow going back to today */
  } else if (offset < 0 && !isTodayOrFuture(newDate)) return;
  simulatedTime = null;
  displayDate = newDate;
  manualOverride = !isSameDay(displayDate, new Date());
  updateScheduleDisplay();
}
dom.prevDayBtn.addEventListener("click", () => navigateDay(-1));
dom.nextDayBtn.addEventListener("click", () => navigateDay(1));
dom.todayBtn.addEventListener("click", () => {
  simulatedTime = null;
  displayDate = new Date();
  manualOverride = false;
  updateScheduleDisplay();
});
dom.sectionWestSeattle.addEventListener("click", () => {
  manualOverride = true;
  setPrimary(dom.sectionWestSeattle, dom.sectionDowntown);
});
dom.sectionDowntown.addEventListener("click", () => {
  manualOverride = true;
  setPrimary(dom.sectionDowntown, dom.sectionWestSeattle);
});
dom.dateDisplay.addEventListener("click", () => toggleDatePicker(true));
dom.datePickerModal.addEventListener("click", e => {
  if (e.target === dom.datePickerModal) toggleDatePicker(false);
});
dom.prevMonthBtn.addEventListener("click", () => {
  calendarDate.setMonth(calendarDate.getMonth() - 1);
  renderCalendar();
});
dom.nextMonthBtn.addEventListener("click", () => {
  calendarDate.setMonth(calendarDate.getMonth() + 1);
  renderCalendar();
});
dom.title.addEventListener("click", () => {
  titleClickCount++;
  if (titleClickCount >= 5) {
    dom.widget.classList.add("kraken-theme");
    dom.kraken.classList.add("active");
    setTimeout(() => {
      dom.widget.classList.remove("kraken-theme");
      dom.kraken.classList.remove("active");
      titleClickCount = 0;
    }, 4000);
  }
});
updateScheduleDisplay();
setInterval(updateLiveElements, 1000);
//# sourceURL=pen.js
    </script>

  
</body>

</html>
